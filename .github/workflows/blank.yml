name: Daily AI Note

on:
  schedule:
    - cron: '08 17 * * *'  # 22h giá» Viá»‡t Nam
    # - cron: '*/5 * * * *'
  workflow_dispatch:

permissions:
  contents: write   # ğŸ‘ˆ cáº§n thÃªm dÃ²ng nÃ y

jobs:
  generate-note:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Generate AI-like daily note
        run: |
          mkdir -p logs
          NOW=$(date '+%Y-%m-%d')
          FILE="logs/$NOW-note.md"
      
          # Äá»c danh sÃ¡ch note tá»« file
          mapfile -t NOTES < notes.txt
      
          RANDOM_INDEX=$((RANDOM % ${#NOTES[@]}))
          NOTE=${NOTES[$RANDOM_INDEX]}
      
          echo "# Dev Note - $NOW" > "$FILE"
          echo "" >> "$FILE"
          echo "$NOTE" >> "$FILE"

      - name: Commit and push
        run: |
          git config user.name "giangairdrop008"
          git config user.email "giangairdrop008@gmail.com"
          git add logs/
          git commit -m "ğŸ§  Daily AI Note for $(date '+%Y-%m-%d')" || echo "KhÃ´ng cÃ³ gÃ¬ Ä‘á»ƒ commit"
          git pull --rebase
          git push
